<form [formGroup]="occupationForm">
    <div class="row">
        <div class="col-md-12 form-title">
            <span class="page-text"> {{ 'title.occupation' | translate }} </span>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6 col-sm-12">
            <mat-form-field hintLabel="{{ 'required-max60' | translate }}" class="col-12">
                <mat-label> {{'app.form.companyName' | translate }} <strong class="red-color">*</strong> </mat-label>
                <input matInput id="occupationName" autocomplete="off" type="text" maxLength="60" formControlName="companyName" oninput="this.value = this.value.toUpperCase()">
                <mat-hint align="end">{{ getOccupation.companyName.value?.length || 0 }}/60 </mat-hint>

                <mat-error *ngIf="errorHandling('companyName', 'required')"> {{ 'required-company' | translate }} </mat-error>

            </mat-form-field>

            <mat-card-header>
                <mat-card-title>
                  <h4 class="form-ttl" style="color: #9E9E9E;"> {{'app.form.companyAddress'| translate}}
                  </h4>
                </mat-card-title>
              </mat-card-header>
              <mat-form-field hintLabel="Max 100 characters" class="col-md-6 col-12">
                <mat-label> {{ 'app.form.buildingNo' | translate }}
                </mat-label>
                <input autocomplete="off" matInput id="occupationCompAddBuildingNo" type="text" maxlength="100" formControlName="companyAddressBuildingNo" oninput="this.value = this.value.toUpperCase()">
                <mat-hint align="end">
                  {{ getOccupation.companyAddressBuildingNo.value?.length || 0 }}/100 </mat-hint>

              </mat-form-field>

              <mat-form-field hintLabel="Max 100 characters" class="col-md-6 col-12">
                <mat-label> {{ 'app.form.roomNo' | translate }}
                </mat-label>
                <input autocomplete="off" matInput id="occupationCompAddRoomNo" type="text" maxlength="100" formControlName="companyAddressRoomNo" oninput="this.value = this.value.toUpperCase()">
                <mat-hint align="end">
                  {{ getOccupation.companyAddressRoomNo.value?.length || 0 }}/100 </mat-hint>

              </mat-form-field>

              <mat-form-field hintLabel="Max 100 characters" class="col-md-6 col-12">
                <mat-label> {{ 'app.form.floor' | translate }}
                </mat-label>
                <input autocomplete="off" matInput id="occupationCompAddFloor" type="text" maxlength="100" formControlName="companyAddressFloor" oninput="this.value = this.value.toUpperCase()">
                <mat-hint align="end">
                  {{ getOccupation.companyAddressFloor.value?.length || 0 }}/100 </mat-hint>


              </mat-form-field>

              <mat-form-field hintLabel="Max 100 characters" class="col-md-6 col-12">
                <mat-label> {{ 'app.form.street' | translate }} <strong class="red-color">*</strong>
                </mat-label>
                <input autocomplete="off" matInput id="occupationCompAddStreet" type="text" maxlength="100" formControlName="companyAddressStreet" oninput="this.value = this.value.toUpperCase()">
                <mat-hint align="end">
                  {{ getOccupation.companyAddressStreet.value?.length || 0 }}/100 </mat-hint>

                <mat-error *ngIf="errorHandling('companyAddressStreet', 'required')">
                  {{ 'required-companyAddressStreet'|translate }} </mat-error>
              </mat-form-field>

              <mat-form-field hintLabel="Max 100 characters" class="col-12">
                <mat-label> {{ 'app.form.qtr' | translate }} <strong class="red-color">*</strong>
                </mat-label>
                <input autocomplete="off" matInput id="occupationCompAddQtr" type="text" maxlength="100" formControlName="companyAddressQtr" oninput="this.value = this.value.toUpperCase()">
                <mat-hint align="end">
                  {{ getOccupation.companyAddressQtr.value?.length || 0 }}/100 </mat-hint>

                <mat-error *ngIf="errorHandling('companyAddressQtr', 'required')">
                  {{ 'required-companyAddressQtr'| translate }} </mat-error>
              </mat-form-field>


              <mat-form-field class="col-12">
                <mat-label> {{ 'app.form.city' | translate }} <strong class="red-color">*</strong>
                </mat-label>
                <mat-select id="occupationCompAddCity" formControlName="companyAddressCity" (selectionChange)="changeCity($event)">
                  <mat-option *ngFor="let city of cityTownship; let i=index" [value]="cityTownship[i].cityId">
                    {{ city.name }} </mat-option>
                </mat-select>
                <mat-error *ngIf="errorHandling('companyAddressCity', 'required')">
                  {{'required-companyAddressCity'| translate}} </mat-error>
              </mat-form-field>
              <mat-form-field  class="col-12">
                <mat-label> {{ 'app.form.township' | translate }} <strong class="red-color">*</strong>
                </mat-label>
                <mat-select id="occupationCompAddTownship" formControlName="companyAddressTownship" >
                  <mat-option *ngFor="let township of companyTownshipList; let i=index" [value]="companyTownshipList[i].townshipId">
                    {{ township.name }} </mat-option>
                </mat-select>
                <mat-error *ngIf="errorHandling('companyAddressTownship', 'required')">
                  {{'required-companyAddressTownship' | translate}} </mat-error>
              </mat-form-field>

            <mat-form-field  class="col-12">
                <mat-label> {{'app.form.companyTelNo' | translate }} <strong class="red-color">*</strong> </mat-label>
                <input matInput type="text" id="occupationTelNo" maxLength="11" formControlName="companyTelNo" numbersOnly>
                <mat-hint align="end">{{ getOccupation.companyTelNo.value?.length || 0 }}/11 </mat-hint>

                <mat-error *ngIf="errorHandling('companyTelNo', 'required')"> {{ 'required-companyPhone' | translate }} </mat-error>
    
            </mat-form-field>

            <mat-form-field hintLabel="{{ 'input-label-from' | translate }}" class="col-6">
                <mat-label> {{'app.form.contactTime' | translate }}  </mat-label>
                <input matInput type="text" id="occupationContactTimeFrom" [ngxTimepicker]="timepickerfrom" [min]="'12:00 am'" [max]="'11:59 am'" formControlName="contactTimeFrom" readonly>
                <ngx-material-timepicker #timepickerfrom></ngx-material-timepicker>

               
            </mat-form-field>

            <mat-form-field hintLabel="{{ 'input-label-to' | translate }}" class="col-6">
                <mat-label> {{'app.form.contactTime' | translate }} </mat-label>
                <input matInput id="occupationContactTimeTo" [ngxTimepicker]="timepickerto" [min]="'12:00 pm'" [max]="'11:59 pm'" formControlName="contactTimeTo" readonly>
                <ngx-material-timepicker #timepickerto></ngx-material-timepicker>

                
            </mat-form-field>

           
        </div>

        <div class="col-md-6 col-12">
            <mat-form-field hintLabel="{{ 'required-max60' | translate }}" class="col-12">
                <mat-label> {{'app.form.department' | translate }} <strong class="red-color">*</strong> </mat-label>
                <input matInput id="occupationDepartment" autocomplete="off" type="text" maxLength="60" formControlName="department" oninput="this.value=this.value.toUpperCase()">
                <mat-hint align="end">{{ getOccupation.department.value?.length || 0 }}/60 </mat-hint>

                <mat-error *ngIf="errorHandling('department', 'required')"> {{ 'required-department' | translate }} </mat-error>
               
            </mat-form-field>

            <mat-form-field hintLabel="{{ 'required-max60' | translate }}" class="col-12">
                <mat-label> {{'app.form.position' | translate }} <strong class="red-color">*</strong> </mat-label>
                <input matInput type="text" id="occupationPosition" autocomplete="off" maxlength="60" formControlName="position" oninput="this.value=this.value.toUpperCase()">
                <mat-hint align="end">{{ getOccupation.position.value?.length || 0 }}/60 </mat-hint>

                <mat-error *ngIf="errorHandling('position', 'required')"> {{ 'required-position' | translate }} </mat-error>
            </mat-form-field>

            <mat-form-field class="col-6">
                <mat-label> {{'app.form.yearOfService' | translate }}  ({{ 'app.form.year' | translate }}) <strong class="red-color">*</strong> </mat-label>
                <mat-select id="occupationYOService" formControlName="yearOfServiceYear">
                    <mat-option *ngFor="let item of arrayOne(100); let i = index;" value="{{ i }}"> {{ i }} </mat-option>
                </mat-select>

                <mat-error *ngIf="errorHandling('yearOfServiceYear', 'required')"> {{ 'required-serviceYear' | translate }} </mat-error>
            </mat-form-field>

            <mat-form-field class="col-6">
                <mat-label> {{'app.form.yearOfService' | translate }}  ({{ 'app.form.month' | translate }})  <strong class="red-color">*</strong> </mat-label>
                <mat-select id="occupationMOService" formControlName="yearOfServiceMonth">
                    <mat-option *ngFor="let item of arrayOne(12); let i = index;" value="{{ i }}"> {{ i }} </mat-option>
                </mat-select>

                <mat-error *ngIf="errorHandling('yearOfServiceMonth', 'required')"> {{ 'required-serviceMonth' | translate }} </mat-error>
            </mat-form-field>
            <mat-form-field class="col-12">
                <mat-label> {{'app.form.companyStatus' | translate }} <strong class="red-color">*</strong> </mat-label>
                <mat-select id="occupationCompanyStatus" formControlName="companyStatus" (selectionChange)="enableOtherComapnyStatus($event)">
                    <mat-option value="1"> Public Company </mat-option>
                    <mat-option value="2"> Factory </mat-option>
                    <mat-option value="3"> Police </mat-option>
                    <mat-option value="4"> Private Company </mat-option>
                    <mat-option value="5"> SME Owner </mat-option>
                    <mat-option value="6"> Government Office </mat-option>
                    <mat-option value="7"> Taxi Owner </mat-option>
                    <mat-option value="8"> Specialist </mat-option>
                    <mat-option value="9"> SME Officer </mat-option>
                    <mat-option value="10"> Military </mat-option>
                    <mat-option value="11"> NGO </mat-option>
                    <mat-option value="12"> Other </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field hintLabel="{{ 'required-max50' | translate }}" class="col-12" [hidden]="hideCompanyStatus">
                <mat-label> {{'app.form.companyStatusOther' | translate }} <strong class="red-color">*</strong> </mat-label>
                <input matInput id="occupationCompanyStatusOther" autocomplete="off" type="text" maxlength="50" formControlName="companyStatusOther" oninput="this.value = this.value.toUpperCase()">
                <mat-hint align="end">{{ getOccupation.companyStatusOther.value?.length || 0 }}/50 </mat-hint>

                <mat-error *ngIf="errorHandling('companyStatusOther', 'required')"> {{ 'required-otherCompany' | translate }} </mat-error>
             
            </mat-form-field>

            <mat-form-field hintLabel="{{ 'required-digit8' | translate }}" class="col-6" (change)="calculateTotalIncome($event, 'monthly')">
                <mat-label> {{'app.form.monthlyBasicIncome' | translate }} <strong class="red-color">*</strong> </mat-label>
                <input matInput id="occupationBasicIncome" autocomplete="off" type="text" [ngAutonumeric]="currencyOption" formControlName="monthlyBasicIncome">

                <mat-error *ngIf="errorHandling('monthlyBasicIncome', 'invalidValue')"> {{ 'required-monthlyBasicIncome' | translate }} </mat-error>
            </mat-form-field>

            <mat-form-field hintLabel="{{ 'required-digit8' | translate }}" class="col-6"  (change)="calculateTotalIncome($event, 'other')">
                <mat-label> {{'app.form.otherIncome' | translate }}  </mat-label>
                <input matInput type="text" id="occupationOtherIncome" autocomplete="off" [ngAutonumeric]="currencyOption" formControlName="otherIncome">

            </mat-form-field>

            <mat-form-field class="col-12">
                <mat-label> {{'app.form.totalIncome' | translate }} </mat-label>
                <input matInput id="occupationTotalIncome" type="text" formControlName="totalIncome" [ngAutonumeric]="totalCurrencyOption" readonly>
            </mat-form-field>

            <mat-form-field class="col-12">
                <mat-label> {{'app.form.salaryDay' | translate }} <strong class="red-color">*</strong> </mat-label>
                <mat-select id="occupationSalaryDay" formControlName="salaryDay" [value]="1" (selectionChange)="enableOtherComapnyStatus($event)">
                    <mat-option *ngFor="let item of arrayOne(31); let i = index;" value="{{ i + 1 }}"> {{ i + 1 }} </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <button mat-button matStepperPrevious class="back">
                <mat-icon>keyboard_arrow_left</mat-icon> 
                <span> {{ 'btn.back' | translate }} </span> 
            </button>

            <button mat-button matStepperNext class="btn-group-align-right">
                <span> {{ 'btn.next' | translate }} </span> 
                <mat-icon>keyboard_arrow_right</mat-icon> 
            </button>

            <button mat-button [disabled]="loading" (click)="formSave()" class="save btn-group-align-right">
                <mat-icon>save</mat-icon> 
                <span> {{ 'btn.save' | translate }} </span> 
                <mat-spinner *ngIf="loading"></mat-spinner>
            </button>
        </div>
    </div>
</form>

<ng-template #erorrSnack>
    <div #alert class="alert alert-danger" role="alert"> 
        {{'required-all' | translate }} 
    </div>
</ng-template>

<ng-template #successfullSave>
    <div #alert class="alert alert-success" role="alert"> 
        <span> {{ 'save-successfull' | translate }} </span>
    </div>
</ng-template>